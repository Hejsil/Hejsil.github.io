<!DOCTYPE html>
<html>
<head>
    <title>Anilist â‹… Hejsil</title>
    <link rel="stylesheet" href="https://unpkg.com/marx-css/css/marx.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <script>
        let animelist = [];
        fetch("https://raw.githubusercontent.com/Hejsil/dotfiles/master/local/share/aniz/list")
            .then(reponse => reponse.text())
            .then(text => {
                let lines = text.split('\n');
                for (line of lines) {
                    let entries = line.split('\t');
                    let entry = {
                        last_updated: entries[0],
                        status: entries[1],
                        episodes: entries[2],
                        watched: entries[3],
                        name: entries[4],
                        link: entries[5],
                    };
                    if (entry.link === undefined)
                        break;

                    animelist.push(entry)
                }

                let list = document.getElementById("list");
                let header = document.getElementById("list-header");
                let list_content = header.outerHTML;

                for (entry of animelist) {
                    list_content += `<tr>
                        <td><a href="${entry.link}">${entry.name}</a></td>
                        <td>${entry.status}</td>
                        <td>${entry.episodes}</td>
                        <td>${entry.watched}</td>
                        <td>${entry.last_updated}</td>
                    </tr>`
                }


                list.innerHTML = list_content;
            })
    </script>
</head>
<body>
    <nav>
        <ul>
            <li>
                <a href="./index.html">Home</a>
            </li>
            <li>
                <a href="./cv.html">CV</a>
            </li>
            <li>
                <a href="./anilist.html">Anilist</a>
            </li>
        </ul>
    </nav>
    <main>
        <h1>Anilist</h1>
        <table id="list">
            <tr id="list-header">
                <th>Anime</th>
                <th>Status</th>
                <th>Episodes Watched</th>
                <th>Watch Count</th>
                <th>Last Updated</th>
            </tr>
        </table>
    </main>
</body>
</html>
